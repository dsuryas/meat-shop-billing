import{r as m,k as N,l as v,j as e,C as y,b as S,c as f,d as C,e as R,I as i,B as p,A as B,a as E}from"./index-BIXGV2mp.js";const M=({onSetupComplete:b,onCancel:h,initialDate:F})=>{const[s,u]=m.useState({date:new Date().toISOString().split("T")[0],paperRate:"",shopRate:"",freshStock:"",remainingStock:"",freshBirds:"",remainingBirds:"",countryFreshStock:"",countryRemainingStock:"",countryFreshBirds:"",countryRemainingBirds:"",productPrices:{liveChicken:"",chickenWithSkin:"",choppedChicken:"",countryChicken:"",countryChickenWithSkin:"",countryChickenMeat:""},estimationMethod:"liveRate"}),[a,k]=m.useState(!1),[x,d]=m.useState("");m.useState({broiler:N(),countryChicken:v()});const r=(t,n,c=!1)=>{u(o=>({...o,...c?{productPrices:{...o.productPrices,[t]:n}}:{[t]:n}}))},g=()=>{const t=Number(s.freshStock||0)+Number(s.remainingStock||0),n=Number(s.countryFreshStock||0)+Number(s.countryRemainingStock||0);let c=0,o=0;if(t>0)if(s.estimationMethod==="liveRate"){const l=Number(s.productPrices.liveChicken||0);c=l>0?t*l:0}else{const l=Number(s.shopRate||0);c=l>0?t/1.45*l:0}if(n>0){const l=Number(s.productPrices.countryChicken||0);o=l>0?n*l:0}return c+o},j=t=>{if(t.preventDefault(),!s.date){d("Please select a date");return}if(!s.paperRate||!s.shopRate){d("Please fill all rate fields");return}if(s.freshStock===""||s.remainingStock===""||s.freshBirds===""||s.remainingBirds===""||s.countryFreshStock===""||s.countryRemainingStock===""||s.countryFreshBirds===""||s.countryRemainingBirds===""){d("Stock and bird count cannot be empty. Use 0 if none.");return}if(Number(s.freshStock)<0||Number(s.remainingStock)<0||Number(s.freshBirds)<0||Number(s.remainingBirds)<0||Number(s.countryFreshStock)<0||Number(s.countryRemainingStock)<0||Number(s.countryFreshBirds)<0||Number(s.countryRemainingBirds)<0){d("Stock and bird count cannot be negative");return}if(!s.productPrices.liveChicken||!s.productPrices.chickenWithSkin){d("Please fill all broiler product prices");return}const n=g();b({...s,estimatedEarnings:n,timestamp:new Date().toISOString()}),k(!0),d("Daily setup completed successfully!")};return e.jsxs(y,{children:[e.jsxs(S,{children:[e.jsx(f,{children:"Daily Setup"}),e.jsx(C,{children:"Set today's rates and stock details"})]}),e.jsx(R,{children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Date"}),e.jsx(i,{type:"date",value:s.date,onChange:t=>r("date",t.target.value),className:"mt-1",disabled:a})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Base Rates"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Paper Rate (₹/kg)"}),e.jsx(i,{type:"number",step:"0.01",placeholder:"Enter paper rate",value:s.paperRate,onChange:t=>r("paperRate",t.target.value),className:"mt-1",disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Shop Rate (₹/kg)"}),e.jsx(i,{type:"number",step:"0.01",placeholder:"Enter shop rate",value:s.shopRate,onChange:t=>{const n=t.target.value;u(c=>({...c,shopRate:n,productPrices:{...c.productPrices,choppedChicken:n}}))},className:"mt-1",disabled:a})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Broiler Stock Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Fresh Stock Weight (kg)"}),e.jsx(i,{type:"number",step:"0.01",placeholder:"Enter fresh stock weight",value:s.freshStock,onChange:t=>r("freshStock",t.target.value),className:"mt-1",disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Fresh Stock (Birds)"}),e.jsx(i,{type:"number",placeholder:"Enter number of birds",value:s.freshBirds,onChange:t=>r("freshBirds",t.target.value),className:"mt-1",disabled:a})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Remaining Stock Weight (kg)"}),e.jsx(i,{type:"number",step:"0.01",placeholder:"Enter remaining stock weight",value:s.remainingStock,onChange:t=>r("remainingStock",t.target.value),className:"mt-1",disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Remaining Stock (Birds)"}),e.jsx(i,{type:"number",placeholder:"Enter number of birds",value:s.remainingBirds,onChange:t=>r("remainingBirds",t.target.value),className:"mt-1",disabled:a})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Broiler Product Prices"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Live Chicken (₹/kg)"}),e.jsx(i,{type:"number",step:"0.01",placeholder:"Enter price",value:s.productPrices.liveChicken,onChange:t=>r("liveChicken",t.target.value,!0),className:"mt-1",disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Chicken with Skin (₹/kg)"}),e.jsx(i,{type:"number",step:"0.01",placeholder:"Enter price",value:s.productPrices.chickenWithSkin,onChange:t=>r("chickenWithSkin",t.target.value,!0),className:"mt-1",disabled:a})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium",children:["Chopped Chicken (₹/kg)",e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Shop rate)"})]}),e.jsx(i,{type:"number",step:"0.01",placeholder:"Equal to shop rate",value:s.productPrices.choppedChicken,className:"mt-1 bg-gray-50",disabled:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Country Chicken Stock Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Fresh Stock Weight (kg)"}),e.jsx(i,{type:"number",step:"0.01",placeholder:"Enter fresh stock weight",value:s.countryFreshStock,onChange:t=>r("countryFreshStock",t.target.value),className:"mt-1",disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Fresh Stock (Birds)"}),e.jsx(i,{type:"number",placeholder:"Enter number of birds",value:s.countryFreshBirds,onChange:t=>r("countryFreshBirds",t.target.value),className:"mt-1",disabled:a})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Remaining Stock Weight (kg)"}),e.jsx(i,{type:"number",step:"0.01",placeholder:"Enter remaining stock weight",value:s.countryRemainingStock,onChange:t=>r("countryRemainingStock",t.target.value),className:"mt-1",disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Remaining Stock (Birds)"}),e.jsx(i,{type:"number",placeholder:"Enter number of birds",value:s.countryRemainingBirds,onChange:t=>r("countryRemainingBirds",t.target.value),className:"mt-1",disabled:a})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Country Chicken Product Prices"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Live Country Chicken (₹/kg)"}),e.jsx(i,{type:"number",step:"0.01",placeholder:"Enter price",value:s.productPrices.countryChicken,onChange:t=>r("countryChicken",t.target.value,!0),className:"mt-1",disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Country Chicken with Skin (₹/kg)"}),e.jsx(i,{type:"number",step:"0.01",placeholder:"Enter price",value:s.productPrices.countryChickenWithSkin,onChange:t=>r("countryChickenWithSkin",t.target.value,!0),className:"mt-1",disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Country Chicken Meat (₹/kg)"}),e.jsx(i,{type:"number",step:"0.01",placeholder:"Enter price",value:s.productPrices.countryChickenMeat,onChange:t=>r("countryChickenMeat",t.target.value,!0),className:"mt-1",disabled:a})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Revenue Estimation Method"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"liveRate",name:"estimationMethod",checked:s.estimationMethod==="liveRate",onChange:t=>r("estimationMethod",t.target.value),disabled:a,className:"text-blue-600"}),e.jsx("span",{className:"text-sm",children:"Live Chicken Rate (Total Stock × Live Rate)"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"skinOutRate",name:"estimationMethod",checked:s.estimationMethod==="skinOutRate",onChange:t=>r("estimationMethod",t.target.value),disabled:a,className:"text-blue-600"}),e.jsx("span",{className:"text-sm",children:"Skin out Rate ((Total Stock ÷ 1.45) × Skin out Rate)"})]})]})]}),s.freshStock!==""&&s.remainingStock!==""||s.countryFreshStock!==""&&s.countryRemainingStock!==""&&e.jsxs("div",{className:"mt-4 p-4 bg-green-50 rounded-lg space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-700",children:"Summary"}),e.jsxs("div",{className:"space-y-1 text-sm text-green-600",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"Broiler Chicken"}),e.jsxs("p",{children:["Total stock: ",Number(s.freshStock||0)+Number(s.remainingStock||0),"kg"]}),e.jsxs("p",{children:["Total birds: ",Number(s.freshBirds||0)+Number(s.remainingBirds||0)]}),s.estimationMethod==="skinOutRate"&&e.jsxs("p",{children:["Estimated meat quantity: ",((Number(s.freshStock||0)+Number(s.remainingStock||0))/1.45).toFixed(2),"kg"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"Country Chicken"}),e.jsxs("p",{children:["Total stock: ",Number(s.countryFreshStock||0)+Number(s.countryRemainingStock||0),"kg"]}),e.jsxs("p",{children:["Total birds: ",Number(s.countryFreshBirds||0)+Number(s.countryRemainingBirds||0)]})]})]}),(Number(s.freshStock||0)+Number(s.remainingStock||0)>0||Number(s.countryFreshStock||0)+Number(s.countryRemainingStock||0)>0)&&e.jsxs("p",{className:"text-xl font-bold text-green-700 mt-2 pt-2 border-t border-green-200",children:["Estimated Earnings: ₹",g().toFixed(2)]})]})]}),!a&&e.jsxs("div",{className:"flex gap-4",children:[e.jsx(p,{type:"submit",className:"flex-1",children:"Complete Daily Setup"}),h&&e.jsx(p,{type:"button",variant:"outline",onClick:h,className:"flex-1",children:"Cancel"})]}),x&&e.jsx(B,{className:a?"bg-green-50":"bg-red-50",children:e.jsx(E,{children:x})})]})})]})};export{M as default};
