import{r as k,j as e,k as A,l as F,C as v,e as y}from"./index-BIXGV2mp.js";import{P as s}from"./index-w-eSnYTo.js";const T=({compact:b=!1,className:o=""})=>{const[a,f]=k.useState({broiler:"1.45",countryChicken:"1.65",isLoading:!0,error:null});k.useEffect(()=>{let n=!0;return(async()=>{try{n&&f(i=>({...i,isLoading:!0,error:null}));let m;try{const i=await Promise.resolve(A());m=j(i)?i:"1.45"}catch(i){console.error("Error fetching broiler conversion factor:",i),m="1.45"}let x;try{const i=await Promise.resolve(F());x=j(i)?i:"1.65"}catch(i){console.error("Error fetching country chicken conversion factor:",i),x="1.65"}n&&f({broiler:m,countryChicken:x,isLoading:!1,error:null})}catch(m){console.error("Error fetching conversion factors:",m),n&&f(x=>({...x,isLoading:!1,error:"Failed to load conversion factors"}))}})(),()=>{n=!1}},[]);const j=n=>n!=null&&!isNaN(n)&&typeof n!="boolean"&&n!=="";return a.isLoading?e.jsx("div",{className:`text-xs text-gray-400 ${o}`,children:b?"Loading...":"Loading conversion factors..."}):a.error?e.jsx("div",{className:`text-xs text-red-500 ${o}`,children:b?"Error":a.error}):b?e.jsxs("div",{className:`text-xs text-gray-500 ${o}`,children:["Conv: B ",a.broiler,", CC ",a.countryChicken]}):e.jsxs("div",{className:`text-sm text-gray-600 ${o}`,children:[e.jsxs("div",{children:["Broiler Conversion: ",a.broiler]}),e.jsxs("div",{children:["Country Chicken Conversion: ",a.countryChicken]})]})};T.propTypes={compact:s.bool,className:s.string};const $=({dailySetup:b,bills:o,getTotalInitialStock:a,getSoldStockLiveWeight:f,getSoldStockMeatWeight:j,getRemainingStockLiveWeight:n,getRemainingStockMeatWeight:C,getTotalInitialStockInMeatWeight:m,getRemainingBirds:x,getCurrentEarnings:i,getRetailSales:w,getWholesaleSales:R,getTotalCountryInitialStock:W=()=>0,getSoldCountryStockLiveWeight:q=()=>0,getSoldCountryStockMeatWeight:E=()=>0,getRemainingCountryStockLiveWeight:L=()=>0,getRemainingCountryStockMeatWeight:M=()=>0,getRemainingCountryBirds:I=()=>0,getCountryChickenSales:P=()=>0})=>{const[r,B]=k.useState({totalInitialStock:"0",soldStockLiveWeight:"0",soldStockMeatWeight:"0",remainingStockLiveWeight:"0",remainingStockMeatWeight:"0",totalInitialStockInMeatWeight:"0",remainingBirds:"0",currentEarnings:"0",retailSales:"0",wholesaleSales:"0",totalCountryInitialStock:"0",soldCountryStockLiveWeight:"0",soldCountryStockMeatWeight:"0",remainingCountryStockLiveWeight:"0",remainingCountryStockMeatWeight:"0",remainingCountryBirds:"0",countryChickenSales:"0"}),c=b||{paperRate:0,shopRate:0,estimatedEarnings:0,productPrices:{liveChicken:0,chickenWithSkin:0,choppedChicken:0,countryChicken:"N/A",countryChickenWithSkin:"N/A",countryChickenMeat:"N/A"}};(!o||!Array.isArray(o))&&(console.error("DashboardSummary: bills prop must be an array"),o=[]);const h=(u,d="N/A")=>{try{return c.productPrices&&c.productPrices[u]!==void 0&&c.productPrices[u]!==null?c.productPrices[u]:d}catch(t){return console.error(`Error accessing product price ${u}:`,t),d}},O=()=>{try{return typeof c.estimatedEarnings=="number"?c.estimatedEarnings.toFixed(2):"0.00"}catch(u){return console.error("Error formatting estimated earnings:",u),"0.00"}};return k.useEffect(()=>{(async()=>{try{const d={},t=async(S,g,N="0")=>{try{if(typeof S!="function")return console.error(`Expected a function for ${g} but received:`,S),N;const l=S();if(l&&typeof l.then=="function")try{const p=await l;d[g]=!isNaN(p)&&p!==null&&p!==void 0?p:N}catch(p){console.error(`Error resolving promise for ${g}:`,p),d[g]=N}else d[g]=!isNaN(l)&&l!==null&&l!==void 0?l:N}catch(l){console.error(`Error calculating ${g}:`,l),d[g]=N}};await Promise.all([t(a,"totalInitialStock"),t(f,"soldStockLiveWeight"),t(j,"soldStockMeatWeight"),t(n,"remainingStockLiveWeight"),t(C,"remainingStockMeatWeight"),t(m,"totalInitialStockInMeatWeight"),t(x,"remainingBirds"),t(i,"currentEarnings"),t(w,"retailSales"),t(R,"wholesaleSales"),t(W,"totalCountryInitialStock"),t(q,"soldCountryStockLiveWeight"),t(E,"soldCountryStockMeatWeight"),t(L,"remainingCountryStockLiveWeight"),t(M,"remainingCountryStockMeatWeight"),t(I,"remainingCountryBirds"),t(P,"countryChickenSales")]),B(d)}catch(d){console.error("Error updating calculated values:",d)}})()},[b,o,a,f,j,n,C,m,x,i,w,R,W,q,E,L,M,I,P]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(v,{className:"border-blue-100 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-blue-50 px-4 py-3 border-b border-blue-100",children:e.jsx("h3",{className:"font-medium text-blue-800",children:"Retail Broiler Rates"})}),e.jsx(y,{className:"pt-4",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"border rounded-md p-3 bg-white shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Paper Rate"}),e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:["₹",(c==null?void 0:c.paperRate)||0,"/kg"]})]}),e.jsxs("div",{className:"border rounded-md p-3 bg-white shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Live Chicken"}),e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:["₹",h("liveChicken",0),"/kg"]})]}),e.jsxs("div",{className:"border rounded-md p-3 bg-white shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"With Skin"}),e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:["₹",h("chickenWithSkin",0),"/kg"]})]}),e.jsxs("div",{className:"border rounded-md p-3 bg-white shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Shop Rate (Meat)"}),e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:["₹",c.shopRate||0,"/kg"]})]})]})})]}),e.jsxs(v,{className:"border-green-100 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-green-50 px-4 py-3 border-b border-green-100",children:e.jsx("h3",{className:"font-medium text-green-800",children:"Country Chicken Rates"})}),e.jsx(y,{className:"pt-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"border rounded-md p-3 bg-white shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Live Chicken"}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:["₹",h("countryChicken","N/A"),"/kg"]})]}),e.jsxs("div",{className:"border rounded-md p-3 bg-white shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"With Skin"}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:["₹",h("countryChickenWithSkin")||h("countryChicken","N/A"),"/kg"]})]}),e.jsxs("div",{className:"border rounded-md p-3 bg-white shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Meat"}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:["₹",h("countryChickenMeat")||h("countryChicken","N/A"),"/kg"]})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(v,{className:"border-amber-100 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-amber-50 px-4 py-3 border-b border-amber-100",children:e.jsx("h3",{className:"font-medium text-amber-800",children:"Broiler Live Weight"})}),e.jsx(y,{className:"pt-4",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 border-b",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Initial Stock:"}),e.jsxs("div",{className:"text-md font-bold text-gray-800",children:[r.totalInitialStock," kg"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 border-b",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Sold:"}),e.jsxs("div",{className:"text-md font-bold text-gray-800",children:[r.soldStockLiveWeight," kg"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-amber-50 rounded",children:[e.jsx("div",{className:"text-sm font-medium text-amber-800",children:"Remaining:"}),e.jsxs("div",{className:"text-lg font-bold text-amber-800",children:[r.remainingStockLiveWeight," kg"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 border-t pt-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Birds Remaining:"}),e.jsx("div",{className:"text-md font-bold text-gray-800",children:r.remainingBirds})]})]})})]}),e.jsxs(v,{className:"border-purple-100 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-purple-50 px-4 py-3 border-b border-purple-100",children:e.jsx("h3",{className:"font-medium text-purple-800",children:"Broiler Meat Weight"})}),e.jsx(y,{className:"pt-4",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 border-b",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Initial Stock:"}),e.jsxs("div",{className:"text-md font-bold text-gray-800",children:[r.totalInitialStockInMeatWeight," kg"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 border-b",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Sold:"}),e.jsxs("div",{className:"text-md font-bold text-gray-800",children:[r.soldStockMeatWeight," kg"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-purple-50 rounded",children:[e.jsx("div",{className:"text-sm font-medium text-purple-800",children:"Remaining:"}),e.jsxs("div",{className:"text-lg font-bold text-purple-800",children:[r.remainingStockMeatWeight," kg"]})]}),e.jsx("div",{className:"mt-2 text-center",children:e.jsx(T,{compact:!0,className:"italic"})})]})})]}),e.jsxs(v,{className:"border-green-100 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-green-50 px-4 py-3 border-b border-green-100",children:e.jsx("h3",{className:"font-medium text-green-800",children:"Country Chicken Stock"})}),e.jsx(y,{className:"pt-4",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 border-b",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Initial Stock:"}),e.jsxs("div",{className:"text-md font-bold text-gray-800",children:[r.totalCountryInitialStock," kg"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 border-b",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Sold:"}),e.jsxs("div",{className:"text-md font-bold text-gray-800",children:[r.soldCountryStockLiveWeight," kg"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-green-50 rounded",children:[e.jsx("div",{className:"text-sm font-medium text-green-800",children:"Remaining:"}),e.jsxs("div",{className:"text-lg font-bold text-green-800",children:[r.remainingCountryStockLiveWeight," kg"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 border-t pt-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Birds Remaining:"}),e.jsx("div",{className:"text-md font-bold text-gray-800",children:r.remainingCountryBirds})]})]})})]}),e.jsxs(v,{className:"border-blue-100 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-blue-50 px-4 py-3 border-b border-blue-100",children:e.jsx("h3",{className:"font-medium text-blue-800",children:"Revenue"})}),e.jsx(y,{className:"pt-4",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 border-b",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Estimated:"}),e.jsxs("div",{className:"text-md font-bold text-gray-800",children:["₹",O()]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-blue-50 rounded",children:[e.jsx("div",{className:"text-sm font-medium text-blue-800",children:"Current:"}),e.jsxs("div",{className:"text-lg font-bold text-blue-800",children:["₹",r.currentEarnings]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[e.jsxs("div",{className:"border rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Retail"}),e.jsxs("div",{className:"text-sm font-semibold text-blue-600",children:["₹",r.retailSales]})]}),e.jsxs("div",{className:"border rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Wholesale"}),e.jsxs("div",{className:"text-sm font-semibold text-orange-600",children:["₹",r.wholesaleSales]})]}),e.jsxs("div",{className:"border rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Country"}),e.jsxs("div",{className:"text-sm font-semibold text-green-600",children:["₹",r.countryChickenSales]})]})]})]})})]})]})]})},D=s.shape({paperRate:s.oneOfType([s.number,s.string]).isRequired,shopRate:s.oneOfType([s.number,s.string]).isRequired,estimatedEarnings:s.number.isRequired,productPrices:s.shape({liveChicken:s.oneOfType([s.number,s.string]).isRequired,chickenWithSkin:s.oneOfType([s.number,s.string]).isRequired,countryChicken:s.oneOfType([s.number,s.string]),countryChickenWithSkin:s.oneOfType([s.number,s.string]),countryChickenMeat:s.oneOfType([s.number,s.string])}).isRequired}),U=s.shape({id:s.oneOfType([s.number,s.string]).isRequired,customerName:s.string.isRequired,customerPhone:s.string,billOption:s.object,weight:s.oneOfType([s.number,s.string]).isRequired,price:s.oneOfType([s.number,s.string]).isRequired,category:s.string.isRequired,productType:s.string.isRequired,chickenType:s.string,timestamp:s.string});$.propTypes={dailySetup:D.isRequired,bills:s.arrayOf(U).isRequired,getTotalInitialStock:s.func.isRequired,getSoldStockLiveWeight:s.func.isRequired,getSoldStockMeatWeight:s.func.isRequired,getRemainingStockLiveWeight:s.func.isRequired,getRemainingStockMeatWeight:s.func.isRequired,getTotalInitialStockInMeatWeight:s.func.isRequired,getRemainingBirds:s.func.isRequired,getCurrentEarnings:s.func.isRequired,getRetailSales:s.func.isRequired,getWholesaleSales:s.func.isRequired,getTotalCountryInitialStock:s.func,getSoldCountryStockLiveWeight:s.func,getSoldCountryStockMeatWeight:s.func,getRemainingCountryStockLiveWeight:s.func,getRemainingCountryStockMeatWeight:s.func,getRemainingCountryBirds:s.func,getCountryChickenSales:s.func};export{$ as default};
