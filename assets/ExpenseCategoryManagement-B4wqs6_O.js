import{r as o,w as b,j as e,C as S,b as D,c as I,d as L,e as k,I as y,B as m,A as T,a as M,P as u}from"./index-BIXGV2mp.js";const z=()=>{const[n,l]=o.useState([]),[r,h]=o.useState({name:"",description:""}),[a,x]=o.useState(-1),[p,i]=o.useState(""),[g,d]=o.useState(!1);o.useEffect(()=>{C()},[]);const C=async()=>{const s=await b();l(s)},j=(s,t)=>{if(a>=0){const c=[...n];c[a]={...c[a],[s]:t},l(c)}else h({...r,[s]:t})},f=()=>{if(!r.name.trim()){i("Category name is required"),d(!1);return}if(n.some(c=>c.name.toLowerCase()===r.name.toLowerCase())){i("A category with this name already exists"),d(!1);return}const s={id:Date.now(),name:r.name.trim(),description:r.description.trim(),createdAt:new Date().toISOString()},t=[...n,s];u(t),l(t),h({name:"",description:""}),i("Category added successfully"),d(!0),setTimeout(()=>{g&&i("")},3e3)},v=s=>{x(s)},N=()=>{if(!n[a].name.trim()){i("Category name is required"),d(!1);return}if(n.some((c,E)=>E!==a&&c.name.toLowerCase()===n[a].name.toLowerCase())){i("A category with this name already exists"),d(!1);return}const t=[...n];t[a]={...t[a],updatedAt:new Date().toISOString()},u(t),l(t),x(-1),i("Category updated successfully"),d(!0),setTimeout(()=>{g&&i("")},3e3)},w=()=>{C(),x(-1)},A=s=>{if(window.confirm("Are you sure you want to delete this expense category?")){const t=[...n];t.splice(s,1),u(t),l(t),i("Category deleted successfully"),d(!0),setTimeout(()=>{g&&i("")},3e3)}};return e.jsxs(S,{children:[e.jsxs(D,{children:[e.jsx(I,{children:"Expense Categories Management"}),e.jsx(L,{children:"Configure expense categories for day closing"})]}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:a>=0?"Edit Category":"Add New Category"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Category Name *"}),e.jsx(y,{placeholder:"Enter category name",value:a>=0?n[a].name:r.name,onChange:s=>j("name",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx(y,{placeholder:"Enter category description",value:a>=0?n[a].description:r.description,onChange:s=>j("description",s.target.value),className:"mt-1"})]}),e.jsx("div",{className:"flex gap-2",children:a>=0?e.jsxs(e.Fragment,{children:[e.jsx(m,{onClick:N,children:"Save Changes"}),e.jsx(m,{variant:"outline",onClick:w,children:"Cancel"})]}):e.jsx(m,{onClick:f,children:"Add Category"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Expense Categories"}),n.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg",children:"No expense categories configured. Add your first category above."}):e.jsx("div",{className:"space-y-4",children:n.map((s,t)=>e.jsx("div",{className:"border rounded-lg p-4 bg-white",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.description}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Created: ",new Date(s.createdAt).toLocaleDateString(),s.updatedAt&&` â€¢ Updated: ${new Date(s.updatedAt).toLocaleDateString()}`]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>v(t),children:"Edit"}),e.jsx(m,{variant:"destructive",size:"sm",onClick:()=>A(t),children:"Delete"})]})]})},s.id))})]}),p&&e.jsx(T,{className:g?"bg-green-50":"bg-red-50",children:e.jsx(M,{children:p})})]})})]})};export{z as default};
