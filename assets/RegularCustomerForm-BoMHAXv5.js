import{f as E,r as c,j as e,B as o,A as D,a as I,C as w,b as S,c as F,d as C,e as k,I as m}from"./index-BIXGV2mp.js";import{P as M}from"./pencil-BX-FVGDB.js";/**
 * @license lucide-react v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],_=E("Trash",T),J=()=>{const[r,g]=c.useState([]),[N,h]=c.useState(!1),[y,a]=c.useState(""),[n,j]=c.useState(null),[s,u]=c.useState({name:"",phone:"",withSkinRate:"",withoutSkinRate:"",sellingPrice:""});c.useEffect(()=>{const t=localStorage.getItem("meatShop_regularCustomers");t&&g(JSON.parse(t))},[]);const d=(t,i)=>{u(l=>({...l,[t]:i}))},v=t=>{if(t.preventDefault(),!s.name||!s.phone){a("Customer name and phone are required");return}if(!s.withSkinRate||!s.withoutSkinRate||!s.sellingPrice){a("All rate fields are required");return}const i=Number(s.withSkinRate),l=Number(s.withoutSkinRate),f=Number(s.sellingPrice);if(isNaN(i)||isNaN(l)||isNaN(f)||i<=0||l<=0||f<=0){a("All rates must be positive numbers");return}let x;if(n)x=r.map(p=>p.id===n.id?{...s,id:n.id}:p),a("Customer updated successfully!");else{if(r.some(A=>A.phone===s.phone)){a("A customer with this phone number already exists");return}const p={...s,id:Date.now(),createdAt:new Date().toISOString()};x=[...r,p],a("Customer added successfully!")}localStorage.setItem("meatShop_regularCustomers",JSON.stringify(x)),g(x),u({name:"",phone:"",withSkinRate:"",withoutSkinRate:"",sellingPrice:""}),j(null),h(!1),setTimeout(()=>a(""),3e3)},b=t=>{u({name:t.name,phone:t.phone,withSkinRate:t.withSkinRate,withoutSkinRate:t.withoutSkinRate,sellingPrice:t.sellingPrice}),j(t),h(!0)},R=t=>{if(window.confirm("Are you sure you want to delete this customer?")){const i=r.filter(l=>l.id!==t);localStorage.setItem("meatShop_regularCustomers",JSON.stringify(i)),g(i),a("Customer deleted successfully!"),setTimeout(()=>a(""),3e3)}},P=()=>{u({name:"",phone:"",withSkinRate:"",withoutSkinRate:"",sellingPrice:""}),j(null),h(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Regular Customers"}),!N&&e.jsx(o,{onClick:()=>h(!0),children:"Add Regular Customer"})]}),y&&e.jsx(D,{className:"bg-blue-50",children:e.jsx(I,{children:y})}),N&&e.jsxs(w,{children:[e.jsxs(S,{children:[e.jsx(F,{children:n?"Edit Customer":"Add Regular Customer"}),e.jsx(C,{children:n?"Update customer details and rates":"Create a new regular customer with specific rates"})]}),e.jsx(k,{children:e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Customer Name *"}),e.jsx(m,{placeholder:"Enter full name",value:s.name,onChange:t=>d("name",t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Phone Number *"}),e.jsx(m,{placeholder:"Enter phone number",value:s.phone,onChange:t=>d("phone",t.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"With Skin Conversion Rate *"}),e.jsx(m,{type:"number",step:"0.01",placeholder:"Enter rate",value:s.withSkinRate,onChange:t=>d("withSkinRate",t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Without Skin Conversion Rate *"}),e.jsx(m,{type:"number",step:"0.01",placeholder:"Enter rate",value:s.withoutSkinRate,onChange:t=>d("withoutSkinRate",t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Selling Price (₹/kg) *"}),e.jsx(m,{type:"number",step:"0.01",placeholder:"Enter price",value:s.sellingPrice,onChange:t=>d("sellingPrice",t.target.value)})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(o,{type:"submit",className:"flex-1",children:n?"Update Customer":"Add Customer"}),e.jsx(o,{type:"button",variant:"outline",onClick:P,className:"flex-1",children:"Cancel"})]})]})})]}),e.jsxs(w,{children:[e.jsx(S,{children:e.jsx(C,{children:"Manage your regular customers and their rates"})}),e.jsx(k,{children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"With Skin Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Without Skin Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Selling Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.phone}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.withSkinRate}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.withoutSkinRate}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["₹",Number(t.sellingPrice).toFixed(2),"/kg"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>b(t),children:e.jsx(M,{className:"h-4 w-4"})}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>R(t.id),children:e.jsx(_,{className:"h-4 w-4"})})]})})]},t.id))})]}),r.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"mt-2 text-sm font-medium text-gray-900",children:"No regular customers"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Add your first regular customer to get started."})]})]})})]})]})};export{J as default};
